## 计算机网络原理第四次作业

计92 甘乔尹 2019011240

### 书面作业部分

**4.2**   解：由于纯 ALOHA 协议最高信道利用率为 $18.4\%$，
				所以实际最大传输速率为 $56\times18.4\%=10.304kbps$，
				所以最大站点数量 $N=10.304\times1000/(1000/100)=1030.4$，
				所以 $N$ 的最大值为 $1030$。

**4.13** 解：由于经典以太网采用曼彻斯特编码，信号在在每个周期变化两次，
				所以波特率为 $10\times10^6\times2=2\times10^7baud$。

**4.14** 答：将低电平记为 $L$，高电平记为 $H$，编码输出为：$LHLHLHHLHLHLLHHLLHHL$。

**4.15** 解：总花费的时间为发送数据和确认帧，以及传输时间的总和，
				$t=(256+32)/10^7+2\times1000/(200\times10^6)=3.88\times10^{-5}s$，
				有效传输速率为 $224/(3.88\times10^{-5})=5.77Mbps$。

**4.18** 答：在快速以太网中的链路延迟是以太网的十分之一，这样就维持了同样的最小帧长度限制。

**4.25** 解：一个帧被损坏的概率 $p=1-(1-10^{-7})^{64\times8}=5.12\times10^{-5}$，
				平均每秒钟发送的帧数为 $N=11\times10^6/(64\times8)=21484.375$ 帧，
				所以平均每秒损坏的帧数为 $n=Np=21484.375\times5.12\times10^{-5}=1.1$ 帧。

**4.27** 答：理由一：有些网络传输发送错误的概率很高，在这种情况下进行检错和重传，重传帧也可能损坏，所以纠错机制更加实用；理由二：有些网络提供的是即时通信服务，在这种情况下由于即时性的限制不能进行重传。

### **IEEE 802.3 实验**

* #### IPv4 部分

**操作系统环境：MacOS；网络环境：Tsinghua-Secure 校园网**

1）目的地为实验主机的数据帧中，长度最小的是 60 字节。先导域不包含在记录的数据中，记录的数据从目的地址开始到填充域结束，因为 4 字节的校验和域不包含在内，所以这验证了 IEEE 802.3 标准中规定的最小帧长为 64 字节。
<img src="/Users/ganqiaoyin/Library/Containers/com.tencent.xinWeChat/Data/Library/Application Support/com.tencent.xinWeChat/2.0b4.0.9/36c8b48ccd52bfdbf6d631504531d199/Message/MessageTemp/9e20f478899dc29eb19741386f9343c8/Image/5151638176613_.pic_hd.jpg" alt="5151638176613_.pic_hd" style="zoom:50%;" />

2）捕获帧中长度最长的帧为 1514 字节，因为数据域的长度最长为 1500 字节，所以帧最长为 6+6+2+1500=1514 字节，抓包结果如下所示：
<img src="/Users/ganqiaoyin/Library/Containers/com.tencent.xinWeChat/Data/Library/Application Support/com.tencent.xinWeChat/2.0b4.0.9/36c8b48ccd52bfdbf6d631504531d199/Message/MessageTemp/9e20f478899dc29eb19741386f9343c8/Image/5141638176582_.pic_hd.jpg" alt="5141638176582_.pic_hd" style="zoom:50%;" />

3）找到由实验主机发出的 ARP 请求帧如下所示：
<img src="/Users/ganqiaoyin/Library/Application Support/typora-user-images/image-20211129182721567.png" alt="image-20211129182721567" style="zoom:50%;" />

目的地址域为 `90 03 25 b9 7f 06`，源地址域为 `a4 83 47 3a 68 25`，在 ARP 地址解析协议中，请求的目的 MAC 地址为全 0，而在封装后目的 MAC 地址为真正的 MAC 地址 `90:03:25:b9:7f:06`。

4）封装 ARP 分组的帧类型字段为 `0x0806`，封装 IP 分组的帧类型字段为 `0x0800`。

5）Wireshark 抓包的优先级可能比设备驱动程序更高，在驱动程序还没有填充不到 64 字节帧的时候，已经捕获了数据。例如上述 ARP 请求帧就没有捕获 padding 域。

6）ICMP协议（RFC792），在以太网中的帧类型字段为 `0x0800`。

* #### IPv6 部分

**操作系统环境：MacOS；网络环境：Tsinghua-Secure 校园网**

1）我所观察到的 ND 报文有四种类型。
1、Router Solicitation：路由器请求，Type = 133，报文长度 16 字节。
<img src="/Users/ganqiaoyin/Library/Application Support/typora-user-images/image-20211129184229493.png" alt="image-20211129184229493" style="zoom:50%;" />

2、Router Advertisement，路由器公告，Type = 134，报文长度 128 字节。
<img src="/Users/ganqiaoyin/Library/Application Support/typora-user-images/image-20211129184323608.png" alt="image-20211129184323608" style="zoom:50%;" />

3、Neighbor Solicitation，邻居请求，Type = 135，报文长度 32 字节。
<img src="/Users/ganqiaoyin/Library/Application Support/typora-user-images/image-20211129190735331.png" alt="image-20211129190735331" style="zoom:50%;" />

4、Neighbor Advertisement，邻居公告，Type = 136，报文长度 32 字节。
<img src="/Users/ganqiaoyin/Library/Application Support/typora-user-images/image-20211129190806962.png" alt="image-20211129190806962" style="zoom:50%;" />

2）如下所示，会周期发送，周期约为 6s：
![image-20211129190541477](/Users/ganqiaoyin/Library/Application Support/typora-user-images/image-20211129190541477.png)

3）对于 RS 报文，IPv6 目标地址为 `ff02::2`，代表链路本地范围内所有路由器。以太网帧目标 MAC 地址为`33:33:00:00:00:02`，代表链路本地范围内所有路由器。对于 RA 报文，IPv6 目标地址为 `ff02::1`，代表链路本地范围内所有节点。以太网帧目标 MAC 地址为本机 MAC 地址。

4）NS 报文发送使用组播的方式，报文的目的 IPv6 地址为被请求的 IPv6 地址对应的组播地址，报文的目的 MAC 为组播 MAC。RS 的 MAC 目标地址为链路本地范围内所有路由器，RA 的目标地址为本机MAC地址。

IPv6 Solicited-Node Multicast Address(被请求的节点多播地址)，是作为节点的单播地址和任播地址的函数，通过计算得出的。它可以按照下面的方法计算：取单播或任播地址的低24位，填充到前缀 `ff02:0:0:0:0:1:ff00::/104`上，产生从 `ff02:0:0:0:0:1:ff00:0000`到 `ff02:0:0:0:0:1:ffff:ffff`范围内的多播地址。

IPv6 Multicast MAC Address : 取 IPv6 Solicited-Node Multicast Address 的最后 32 位，再在前面加上16位的 `33:33` 即可。









